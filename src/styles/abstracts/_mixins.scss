@use "functions" as *;
@use "sass:meta";
@use "sass:color";

@mixin breakpoint($size) {
    $breakpoint: breakpoint-value($size);

    @media screen and (min-width: $breakpoint) {
        @content;
    }
}

@mixin breakpoint-down($size) {
    $breakpoint: breakpoint-value($size);
    $max: breakpoint-max($breakpoint);

    @media screen and (max-width: $max) {
        @content;
    }
}

@mixin breakpoint-between($min, $max) {
    $min-breakpoint: breakpoint-value($min);
    $max-breakpoint: breakpoint-max(breakpoint-value($max));

    @media screen and (min-width: $min-breakpoint) and (max-width: $max-breakpoint) {
        @content;
    }
}

@mixin flex($direction: row, $wrap: wrap, $justify: flex-start, $align-items: stretch, $align-content: stretch, $gap: null) {
    display: flex;
    flex-direction: $direction;
    flex-wrap: $wrap;
    justify-content: $justify;
    align-items: $align-items;
    align-content: $align-content;

    @if $gap !=null {
        gap: $gap;
    }
}

@mixin reduce-motion {
    @media (prefers-reduced-motion: reduce) {
        @content;
    }
}

@mixin hoverable {
    @media (hover: hover) and (pointer: fine) {
        @content;
    }
}

@mixin sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border-width: 0;
}

@mixin focus-ring($color: var(--color-focus-ring, var(--color-primary)), $width: 2px, $offset: 2px) {
    outline: $width solid $color;
    outline-offset: $offset;
}

@mixin truncate {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

@mixin line-clamp($lines: 2) {
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: $lines;
    overflow: hidden;
}

@mixin css-vars($values, $prefix: null, $rgb: false) {
    @if meta.type-of($values) !="map" {
        @error "css-vars() expects a map, got: #{meta.type-of($values)}";
    }

    @each $key, $value in $values {
        $name: "#{$key}";

        @if $prefix !=null and $prefix !="" {
            $name: "#{$prefix}-#{$key}";
        }

        @if meta.type-of($value)=="map" {
            @include css-vars($value, $name, $rgb);
        }

        @else {
            --#{$name}: #{$value};

            @if $rgb ==true and meta.type-of($value)=="color" {
                --#{$name}-rgb: #{rgb-channels($value)};
            }
        }
    }
}

@mixin font-size($mobile, $tablet, $desktop) {
    font-size: $mobile;

    @include breakpoint(md) {
        font-size: $tablet;
    }

    @include breakpoint(lg) {
        font-size: $desktop;
    }
}